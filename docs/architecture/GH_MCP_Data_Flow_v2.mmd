%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#4a90d9'}}}%%

flowchart LR
    subgraph TITLE["ğŸ”„ GH_MCP v2.0 è³‡æ–™æµè¿½è¹¤ç¤ºæ„åœ–"]
        direction LR
    end

    subgraph CORRECT["âœ… æ­£ç¢ºé…ç½® (v2.0)"]
        direction LR
        C_SIZE["SizeX/Y/Z<br/>10, 10, 10"]
        C_BOX["Center Box<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>X/Y/Z = å°ºå¯¸<br/>è¼¸å‡º: 1 å€‹ Brep"]
        C_DECON["Deconstruct<br/>Brep<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>è¼¸å‡º: 6 å€‹é¢"]
        C_EVAL["Evaluate<br/>Surface<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>UV=0.5<br/>è¼¸å‡º: 6 å€‹é»"]
        C_CONN["Connection<br/>From Plane<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>è¼¸å‡º: 6 å€‹é€£æ¥"]
        C_PART["WASP Part"]
        C_AGG["Stochastic<br/>Aggregation"]

        C_SIZE --> C_BOX
        C_BOX -->|"1 Brep"| C_DECON
        C_DECON -->|"6 é¢"| C_EVAL
        C_EVAL -->|"6 é»"| C_CONN
        C_CONN -->|"6 é€£æ¥"| C_PART
        C_PART --> C_AGG
    end

    subgraph WRONG["âŒ éŒ¯èª¤é…ç½® (v1.x)"]
        direction LR
        W_SIZE["SizeX/Y/Z<br/>10, 10, 10"]
        W_MESH["Mesh Box<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>X/Y/Z = ç´°åˆ†æ•¸<br/>è¼¸å‡º: 600+ é¢"]
        W_NORMAL["Face Normals<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>è¼¸å‡º: 600+ æ³•å‘é‡"]
        W_CONN["Connection<br/>From Direction<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>è¼¸å‡º: 600+ é€£æ¥"]
        W_CRASH["ğŸ’¥ CRASH<br/>Rhino å´©æ½°"]

        W_SIZE --> W_MESH
        W_MESH -->|"600+ é¢"| W_NORMAL
        W_NORMAL -->|"600+ æ³•å‘é‡"| W_CONN
        W_CONN -->|"è³‡æ–™çˆ†ç‚¸!"| W_CRASH
    end

    subgraph SEMANTIC["ğŸ§  LLM Semantic Review æª¢æŸ¥é»"]
        direction TB
        S1["1. è­˜åˆ¥ Mesh Box"]
        S2["2. è¨ˆç®—: 10Ã—10Ã—6 â‰ˆ 600"]
        S3["3. æ¨™è¨˜: ğŸ”´ Critical"]
        S4["4. å»ºè­°: ç”¨ Center Box"]

        S1 --> S2 --> S3 --> S4
    end

    %% æ¨£å¼
    classDef correct fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    classDef wrong fill:#ffebee,stroke:#f44336,stroke-width:2px
    classDef semantic fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef crash fill:#f44336,stroke:#b71c1c,stroke-width:3px,color:#fff

    class CORRECT correct
    class WRONG wrong
    class SEMANTIC semantic
    class W_CRASH crash
